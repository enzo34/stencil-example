{"version":3,"file":"login-form.js","sourceRoot":"","sources":["../../../src/components/login-form/login-form.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAgB,MAAM,eAAe,CAAC;AAOzE,MAAM,OAAO,SAAS;;qBACO,EAAE;wBACC,EAAE;;IAMtB,iBAAiB,CAAC,KAAY;QAClC,IAAI,CAAC,KAAK,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;IAC1D,CAAC;IAEO,oBAAoB,CAAC,KAAY;QACrC,IAAI,CAAC,QAAQ,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;IAC7D,CAAC;IAEO,KAAK,CAAC,YAAY,CAAC,KAAY;QACnC,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC;YACD,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,6BAA6B,EAAE;gBACxD,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE;oBACL,cAAc,EAAE,kBAAkB;iBACrC;gBACD,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;aACvE,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC;gBACf,MAAM,IAAI,KAAK,CAAC,uBAAuB,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC;YAC9D,CAAC;YAED,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;YACnC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC;IACL,CAAC;IAED,MAAM;QACF,OAAO,CACH,6DAAM,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;YAC/C;;gBAEI,8DAAO,IAAI,EAAC,OAAO,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAI,CACxF;YACR;;gBAEI,8DAAO,IAAI,EAAC,UAAU,EAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,GAAI,CACjG;YACR,+DAAQ,IAAI,EAAC,QAAQ,YAAe,CACjC,CACV,CAAC;IACN,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACJ","sourcesContent":["import { Component, h, State, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n    tag: 'login-form', // Le nom du tag du composant\r\n    styleUrl: 'login-form.css', // Lien vers le fichier de style\r\n    shadow: true // Utilisation du Shadow DOM pour l'encapsulation\r\n})\r\nexport class LoginForm {\r\n    @State() email: string = '';\r\n    @State() password: string = '';\r\n\r\n    // EventEmitter pour émettre des événements sur succès ou échec\r\n    @Event() loginSuccess: EventEmitter;\r\n    @Event() loginError: EventEmitter;\r\n\r\n    private handleEmailChange(event: Event) {\r\n        this.email = (event.target as HTMLInputElement).value;\r\n    }\r\n\r\n    private handlePasswordChange(event: Event) {\r\n        this.password = (event.target as HTMLInputElement).value;\r\n    }\r\n\r\n    private async handleSubmit(event: Event) {\r\n        event.preventDefault();\r\n        try {\r\n            const response = await fetch('http://localhost:3000/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ email: this.email, password: this.password })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            this.loginSuccess.emit(data);\r\n        } catch (error) {\r\n            this.loginError.emit(error.message);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={(event) => this.handleSubmit(event)}>\r\n                <label>\r\n                    Email:\r\n                    <input type=\"email\" value={this.email} onInput={(event) => this.handleEmailChange(event)} />\r\n                </label>\r\n                <label>\r\n                    Password:\r\n                    <input type=\"password\" value={this.password} onInput={(event) => this.handlePasswordChange(event)} />\r\n                </label>\r\n                <button type=\"submit\">Login</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n"]}